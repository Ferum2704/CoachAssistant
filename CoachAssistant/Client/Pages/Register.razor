@page "/register"

<MudPaper Elevation="25">
    <MudContainer>
        <EditForm Model="@user" OnValidSubmit="RegisterUser">
            <DataAnnotationsValidator />
            <MudGrid Justify="Justify.Center" AlignItems="AlignItems.Center">
                <MudItem xs="12" sm="6" md="4">
                    <MudTextField @bind-Value="user.FirstName" Label="First name" Variant="Variant.Outlined" FullWidth />
                     <MudTextField @bind-Value="user.LastName" Label="Last name" Variant="Variant.Outlined" FullWidth />
                     <MudTextField @bind-Value="user.Username" Label="Username" Variant="Variant.Outlined" FullWidth />
                     <MudSelect T="string" @bind-Value="@user.Role" Variant="Variant.Text">
                         <MudSelectItem Value="@("Manager")"/>
                         <MudSelectItem Value="@("Coach")" />
                     </MudSelect>
                     <MudTextField @bind-Value="user.Password" Label="Password" Variant="Variant.Outlined" FullWidth InputType="InputType.Password" />
                     <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" FullWidth>Register</MudButton>
                 </MudItem>
             </MudGrid>
         </EditForm>
     </MudContainer>
 </MudPaper>

@inject NavigationManager NavigationManager
@inject IHttpClientService HttpClientService

@code {
    RegistrationModel user = new();

    async Task RegisterUser()
    {
        await HttpClientService.PostAsync<RegistrationModel>(ApiUrls.RegisterUrl, user);

        NavigationManager.NavigateTo("/login");
    }
}
